syntax = "proto3";

package libproto;

option go_package = "github.com/Observe86/lib-proto/gen;gen";

message Ack {
  bool success = 1;
}

message Metric {
  string name = 1;
  double value = 2;
  int64 timestamp = 3;
}

message MetricBatch {
  repeated Metric metrics = 1;
}

message LogEntry {
  string message = 1;
  string level = 2;
  int64 timestamp = 3;
}

message LogBatch {
  repeated LogEntry logs = 1;
}

message Span {
  string name = 1;
  int64 start_time = 2;
  int64 end_time = 3;
}

message TraceBatch {
  repeated Span spans = 1;
}

service CollectorService {
  rpc SendMetrics(MetricBatch) returns (Ack);
  rpc SendLogs(LogBatch) returns (Ack);
  rpc SendTraces(TraceBatch) returns (Ack);
}
